<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Nasdanika Bank</title>
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">

<script src="js/jquery-2.1.0.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>

<script src="js/underscore-min.js"></script>
<script src="js/backbone-min.js"></script>

<script>
	$(document).ready(function() {

		var Workspace = Backbone.Router.extend({

			// This router matches router servlet path and
			// loads path to specified container
			// e.g. router/main/mypage.html will load router/mypage.html to 
			// element with id main
			routes : {
				"router/:targetId/*path" : function(targetId, path) {
					var target = $("#" + targetId);
					if (target.length) {
						var loader = 
							"<table style='width: 100%; height:100%;'>" +
								"<tr valign='middle'>" +
									"<td align='center'>" +
										"<img src='images/loader.gif'></img>" +
										"<br/>" +
										"Loading..." +
									"</td>" +
								"</tr>" +
							"</table>";
						target.html(loader);
						target.load("router/" + path,  function (responseText, textStatus, req) {
					        if (textStatus == "error") {
					        	var errorMessage = 
					        		'<div class="panel panel-danger">' +
					        	  		'<div class="panel-heading">' +
					        	    		'<h3 class="panel-title">Error loading <b>'+path+'</b></h3>' +
					        	  		'</div>' +
					        	  		'<div class="panel-body">' +
					        	    		responseText
					        	  		'</div>' +
					        		'</div>';
					        	target.html(errorMessage);
					        }
						});
					} else {
						alert("Element not found: "+targetId);
					}
				}
			}

		});

		workspace = new Workspace();
		Backbone.history.start();

		workspace.navigate('router/main/ccview.html', {
			trigger : true
		});
	});
</script>
</head>

<body>
	<div class="panel panel-default" style="width:800px; margin: 0 auto; margin-top:10px">
		<div class="panel-heading">
			<h3 class="panel-title">Nasdanika Bank</h3>
		</div>
		<div id="main" class="panel-body">
		</div>
	</div>
</body>
</html>
